(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){},38:function(e,t,a){e.exports=a(81)},43:function(e,t,a){},45:function(e,t,a){},59:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(21),s=a.n(i),c=(a(43),a(4)),o=a(5),u=a(7),d=a(6),l=a(8),p=(a(45),a(22)),m=a(17),h=r.a.createContext(null),f=function(e){return function(t){return r.a.createElement(h.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))})}},v=h,g=a(24),b=a.n(g),E=(a(52),a(54),{apiKey:"AIzaSyBqd2lmJTdVxcmAMUtmVjNNOef9JkHCvJA",authDomain:"todolist-7a64c.firebaseapp.com",databaseURL:"https://todolist-7a64c.firebaseio.com",projectId:"todolist-7a64c",storageBucket:"todolist-7a64c.appspot.com",messagingSenderId:"248405903996"}),_=function e(){var t=this;Object(c.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},b.a.initializeApp(E),this.auth=b.a.auth(),this.db=b.a.database()},C=(a(31),{email:"",passwordOne:"",passwordTwo:"",error:null}),w=f(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,r=t.passwordOne;a.props.firebase.doCreateUserWithEmailAndPassword(n,r).then(function(e){a.props.IdUpdate(e.user.uid),a.props.changeLoginStatus(),window.location.reload()}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(m.a)({},e.target.name,e.target.value))},a.state=Object(p.a)({},C),a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.passwordOne,n=e.passwordTwo,i=e.error,s=a!==n||""===a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit,className:"signup__box_inner"},r.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email",className:"signup__input"}),r.a.createElement("input",{name:"passwordOne",value:a,onChange:this.onChange,type:"password",placeholder:"\u5bc6\u78bc",className:"signup__input"}),r.a.createElement("input",{name:"passwordTwo",value:n,onChange:this.onChange,type:"password",placeholder:"\u78ba\u8a8d\u5bc6\u78bc",className:"signup__input"}),r.a.createElement("br",null),r.a.createElement("button",{disabled:s,type:"submit",className:"signup__enter"},"\u8a3b\u518a"),r.a.createElement("div",{className:"signup__error"},i&&r.a.createElement("p",null,i.message)))}}]),t}(n.Component)),S=function(e){return r.a.createElement("div",{className:"signup__box"},r.a.createElement("h1",null,"\u8a3b\u518a"),r.a.createElement(w,{changeLoginStatus:e.changeLoginStatus,IdUpdate:e.IdUpdate}))},O={email:"",password:"",error:null},y=f(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,r=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,r).then(function(e){a.props.IdUpdate(e.user.uid),a.props.changeLoginStatus(),window.location.reload()}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(m.a)({},e.target.name,e.target.value))},a.state=Object(p.a)({},O),a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,i=""===a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit,className:"signup__box_inner"},r.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email",className:"signup__input"}),r.a.createElement("input",{name:"password",value:a,onChange:this.onChange,type:"password",placeholder:"\u5bc6\u78bc",className:"signup__input"}),r.a.createElement("button",{disabled:i,type:"submit",className:"signup__enter"},"\u767b\u5165"),r.a.createElement("br",null),r.a.createElement("div",{className:"signup__error"},n&&r.a.createElement("p",null,n.message)))}}]),t}(n.Component)),j=function(e){return r.a.createElement("div",{className:"signup__box"},r.a.createElement("h1",null,"\u767b\u5165"),r.a.createElement(y,{changeLoginStatus:e.changeLoginStatus,IdUpdate:e.IdUpdate,AddCardItem:e.AddCardItem}))},A=(a(59),a(10)),D=function(e){return{type:"ADD_CARD",payload:e}},I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).signupStatus=function(){a.setState({showSignup:!a.setState.showSignup})},a.state={showSignup:!1},a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"user_box"},r.a.createElement("div",{className:"user_box__inner"},r.a.createElement(j,{changeLoginStatus:this.props.changeLoginStatus,IdUpdate:this.props.UserId}),this.state.showSignup?r.a.createElement(S,{changeLoginStatus:this.props.changeLoginStatus,IdUpdate:this.props.UserId}):r.a.createElement("div",{className:"signUpBtn",onClick:this.signupStatus},"\u6210\u70ba\u6703\u54e1")))}}]),t}(n.Component),N=Object(A.b)(function(e){return{userId:e.UserIdReducer}},{UserId:function(e){return{type:"USER_ID",payload:e}}})(I),W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).signOut=function(){a.props.firebase.doSignOut().then(function(){a.props.changeLoginStatus(),localStorage.setItem("ID",null)}).catch(function(){console.log("logout error")})},a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("li",{style:k,onClick:function(){e.signOut(),e.props.closeSideMenu()}},"\u767b\u51fa")}}]),t}(n.Component),k={cursor:"pointer"},R=f(W),x=a(37),U=a(20),T=a.n(U),M=(a(70),a(72),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).handleChange=function(t){e.setState({item:{name:e.state.item.name,time:T()(t).format("YYYY-MM-DD")}})},e.updateWatch=function(){e.props.firebase.user(e.props.userId).child(e.props.type).push({name:e.state.item.name,time:e.state.item.time})},e.updateWanted=function(){e.props.firebase.user(e.props.userId).child(e.props.type).push({name:e.state.item.name,time:e.state.item.time})},e.state={item:{name:"",time:T()(new Date).format("YYYY-MM-DD")}},e}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"edit__box"},r.a.createElement("div",{className:"closeBtn",onClick:function(){e.props.AddCard(!e.props.add)}},"x"),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Name",onChange:function(t){e.setState({item:{name:t.target.value,time:e.state.item.time}})}}),"watch"===this.props.type?r.a.createElement(x.a,{selected:this.state.item.time,onChange:function(t){return e.handleChange(t)},dateFormat:"YYYY-MM-dd"}):""),r.a.createElement("div",{className:"addBtn",onClick:function(){"wanted"===e.props.type?(e.props.AddCard(!e.props.add),e.updateWanted()):(e.props.AddCard(!e.props.add),e.updateWatch())}},"Add"))}}]),t}(n.Component)),Y=Object(A.b)(function(e){return{add:e.AddCardReducer,userId:e.UserIdReducer,type:e.CardTypeReducer}},{AddCard:D})(f(M)),L=(a(74),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.props.add?r.a.createElement("div",null,r.a.createElement("div",{className:"CardAdd"},"+"),r.a.createElement("div",{className:"CardAdd__edit"},r.a.createElement(Y,null))):r.a.createElement("div",{className:"CardAdd",onClick:function(){e.props.AddCard(!e.props.add)}},"+")}}]),t}(n.Component)),B=Object(A.b)(function(e){return{add:e.AddCardReducer}},{AddCard:D})(L),P=(a(76),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).set=function(e){a.props.firebase.user(a.props.userId).child(a.props.type).child(e).set({name:a.state.item.name,time:a.state.item.time})},a.delete=function(e){a.props.firebase.user(a.props.userId).child(a.props.type).child(e).remove()},a.move=function(e){a.props.firebase.user(a.props.userId).child(a.props.type).child(e).remove(),a.props.firebase.user(a.props.userId).child("watch").child(e).set({name:a.state.item.name,time:a.state.item.time})},a.state={edit:!1,item:{name:a.props.detail.name,time:a.props.detail.time}},a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.state.edit?"cardBox__edit":"cardBox"},this.state.edit?"":r.a.createElement("div",{className:"edit",onClick:function(){e.setState({edit:!e.state.edit})}}),this.state.edit?r.a.createElement("input",{onChange:function(t){e.setState({item:{name:t.target.value,time:e.state.item.time}})},value:this.state.item.name}):r.a.createElement("div",null,"\u540d\u7a31: ",this.state.item.name),"watch"===this.props.type?this.state.edit?r.a.createElement("input",{onChange:function(t){e.setState({item:{time:t.target.value,name:e.state.item.name}})},value:this.state.item.time}):r.a.createElement("div",null,"\u89c0\u770b\u6642\u9593: ",this.state.item.time):"","wanted"===this.props.type&&this.state.edit?r.a.createElement("div",{className:"moveBtn",onClick:function(){e.setState({edit:!e.state.edit}),e.move(e.props.id)}},"\u79fb\u81f3\u5df2\u89c0\u770b"):"",this.state.edit?r.a.createElement("div",{className:"saveBtn",onClick:function(){e.setState({edit:!e.state.edit}),e.set(e.props.id)}},"\u5132\u5b58"):"",this.state.edit?r.a.createElement("div",{className:"deleteBtn",onClick:function(){e.setState({edit:!e.state.edit}),e.delete(e.props.id)}},"\u522a\u9664"):"")}}]),t}(n.Component)),V=Object(A.b)(function(e){return{userId:e.UserIdReducer,type:e.CardTypeReducer}})(f(P)),J=function(e){function t(e){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).call(this,e))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t={display:"flex",flexWrap:"wrap"};return r.a.createElement("div",null,"watch"===this.props.type?r.a.createElement("div",{style:t},Object.keys(this.props.cardWatch).map(function(t){return r.a.createElement(V,{detail:e.props.cardWatch[t],key:t,id:t})})):r.a.createElement("div",{style:t},Object.keys(this.props.cardWanted).map(function(t){return r.a.createElement(V,{detail:e.props.cardWanted[t],key:t,id:t})})))}}]),t}(n.Component),X=Object(A.b)(function(e){return{type:e.CardTypeReducer,cardWatch:e.SaveWatchCardReducer,cardWanted:e.SaveWantedCardReducer}})(f(J)),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).switch_to_watch=function(){a.setState({active:"watch"})},a.switch_to_wanted=function(){a.setState({active:"wanted"})},a.state={active:a.props.type},a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:H},r.a.createElement("div",{style:q},r.a.createElement("div",{style:"watch"===this.state.active?K:G,onClick:function(){e.props.AddCardType("watch"),e.switch_to_watch()}},"\u5df2\u89c0\u770b"),r.a.createElement("div",{style:"wanted"===this.state.active?K:G,onClick:function(){e.props.AddCardType("wanted"),e.switch_to_wanted()}},"\u5f85\u89c0\u770b")),r.a.createElement("div",{style:F},r.a.createElement(B,null),r.a.createElement(X,null)))}}]),t}(n.Component),H={display:"flex",flexDirection:"column",padding:"2vw",paddingTop:"calc(50px + 2vw)"},q={display:"flex",fontSize:"18px",color:"white",marginBottom:"15px"},F={display:"flex"},K={color:"yellow",cursor:"pointer",marginRight:"5px"},G={color:"white",cursor:"pointer",marginRight:"5px"},Q=Object(A.b)(function(e){return{type:e.CardTypeReducer}},{AddCardType:function(e){return{type:"ADD_CARD_TYPE",payload:e}}})(z),Z=(a(78),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).updateWatch=function(e){a.props.firebase.user(a.props.userId).child(e).push({name:a.props.item.title,time:T()(new Date).format("YYYY-MM-DD")})},a.updateWanted=function(e){a.props.firebase.user(a.props.userId).child(e).push({name:a.props.item.title,time:T()(new Date).format("YYYY-MM-DD")})},a.checkWatch=function(){var e=!1;Object.keys(a.props.cardWatch).map(function(t){a.props.cardWatch[t].name===a.props.item.title&&(e=!0)}),e?alert("\u5df2\u5728\u6e05\u55ae\u5167"):(a.updateWatch("watch"),alert("\u6dfb\u52a0\u6210\u529f\uff01"))},a.checkWanted=function(){var e=!1;Object.keys(a.props.cardWanted).map(function(t){a.props.cardWanted[t].name===a.props.item.title&&(e=!0)}),e?alert("\u5df2\u5728\u6e05\u55ae\u5167"):(a.updateWanted("wanted"),alert("\u6dfb\u52a0\u6210\u529f\uff01"))},a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{key:"movie-"+this.props.idx,className:"movie__card"},r.a.createElement("img",{className:"movie__image",src:"https://image.tmdb.org/t/p/w300"+this.props.item.poster_path}),r.a.createElement("div",{className:"movie__title"}," ",this.props.item.title," "),r.a.createElement("div",{className:"movie__card_hover"},r.a.createElement("div",{className:"movie__watch",onClick:this.checkWatch},"\u52a0\u5165\u5df2\u89c0\u770b"),r.a.createElement("div",{className:"movie__wanted",onClick:this.checkWanted},"\u52a0\u5165\u5f85\u89c0\u770b")))}}]),t}(n.Component)),$=Object(A.b)(function(e){return{userId:e.UserIdReducer,cardWatch:e.SaveWatchCardReducer,cardWanted:e.SaveWantedCardReducer}})(f(Z)),ee=f(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={movie:[],weather:0,weatherIcon:""},a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.themoviedb.org/3/movie/popular?api_key=62e89effcdf6600bdd0c99c694029d19&language=zh-TW&region=tw").then(function(e){return e.json()}).then(function(t){var a=t.results.map(function(e,t){return r.a.createElement($,{item:e,idx:t})});e.setState({movie:a})}),fetch("//api.openweathermap.org/data/2.5/weather?q=Taipei,tw&APPID=bb26d8de2301acc163da7859740eaec3&units=metric").then(function(e){return e.json()}).then(function(t){e.setState({weather:t.main.temp,weatherIcon:"http://openweathermap.org/img/w/"+t.weather[0].icon+".png"})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"Home__box"},r.a.createElement("div",{className:"weather__box"},"\u73fe\u5728\u6eab\u5ea6 ",this.state.weather,"\xb0C ",r.a.createElement("img",{src:this.state.weatherIcon})),r.a.createElement("div",null,parseInt(this.state.weather)>=20?"\u597d\u5929\u6c23\uff0c\u51fa\u9580\u770b\u5834\u96fb\u5f71\u5427":"\u6709\u9ede\u51b7\uff0c\u5728\u5bb6\u770b\u5834\u96fb\u5f71\u5427"),r.a.createElement("br",null),"\u71b1\u9580\u5f71\u7247",r.a.createElement("div",{className:"movie__box"},this.state.movie))}}]),t}(n.Component)),te=a(85),ae=a(83),ne=a(84),re=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).changeLoginStatus=function(){e.setState({loginStatus:!e.state.loginStatus})},e.changeSideMenuStatus=function(){e.setState({sidemenu:!e.state.sidemenu})},e.state={loginStatus:"null"===localStorage.getItem("ID")||null===localStorage.getItem("ID"),sidemenu:!1},e}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.user(this.props.userId).on("value",function(t){null!==t.val()&&(t.val().hasOwnProperty("watch")?e.props.CardWatchData(t.val().watch):e.props.CardWatchData({}),t.val().hasOwnProperty("wanted")?e.props.CardWantedData(t.val().wanted):e.props.CardWantedData({})),null===t.val()&&(e.props.CardWantedData({}),e.props.CardWatchData({}))})}},{key:"render",value:function(){var e=this;return!0===this.state.loginStatus?r.a.createElement("div",{className:"App"},r.a.createElement(N,{changeLoginStatus:this.changeLoginStatus})):r.a.createElement(te.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("ul",{className:"navBar"},r.a.createElement("div",{className:"left"},r.a.createElement(ae.a,{to:"/"},r.a.createElement("li",{className:"navBar__logo"})),r.a.createElement("li",null,r.a.createElement(ae.a,{to:"/Card"},"\u6211\u7684\u6e05\u55ae"))),r.a.createElement("div",{className:"right"},r.a.createElement(R,{closeSideMenu:this.changeSideMenuStatus,changeLoginStatus:this.changeLoginStatus}))),r.a.createElement("ul",{className:"navBar__mobile"},r.a.createElement(ae.a,{to:"/"},r.a.createElement("li",{className:"navBar__mobile__logo"})),r.a.createElement("div",{className:"navBar__mobile__icon",onClick:function(){return e.changeSideMenuStatus()}}),this.state.sidemenu?r.a.createElement("div",{className:"sidemenu"},r.a.createElement("div",{className:"close",onClick:function(){return e.changeSideMenuStatus()}},"X"),r.a.createElement("li",{onClick:function(){return e.changeSideMenuStatus()}},r.a.createElement(ae.a,{to:"/"},"\u9748\u611f")),r.a.createElement("li",{onClick:function(){return e.changeSideMenuStatus()}},r.a.createElement(ae.a,{to:"/Card"},"\u6211\u7684\u6e05\u55ae")),r.a.createElement(R,{closeSideMenu:this.changeSideMenuStatus,changeLoginStatus:this.changeLoginStatus})):""),r.a.createElement(ne.a,{exact:!0,path:"/",component:ee}),r.a.createElement(ne.a,{path:"/Card",component:Q})))}}]),t}(n.Component),ie=Object(A.b)(function(e){return{userId:e.UserIdReducer,cardWatch:e.SaveWatchCardReducer,cardWanted:e.SaveWantedCardReducer}},{CardWantedData:function(e){return{type:"SAVE_CARD_WANTED_DATA",payload:e}},CardWatchData:function(e){return{type:"SAVE_CARD_WATCH_DATA",payload:e}}})(f(re)),se=a(18),ce=Object(se.b)({AddCardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"ADD_CARD"===t.type?t.payload:e},UserIdReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage.getItem("ID"),t=arguments.length>1?arguments[1]:void 0;return"USER_ID"===t.type?(localStorage.setItem("ID",t.payload),t.payload):e},CardTypeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"watch",t=arguments.length>1?arguments[1]:void 0;return"ADD_CARD_TYPE"===t.type?t.payload:e},SaveWantedCardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SAVE_CARD_WANTED_DATA"===t.type?t.payload:e},SaveWatchCardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SAVE_CARD_WATCH_DATA"===t.type?t.payload:e}});s.a.render(r.a.createElement(v.Provider,{value:new _},r.a.createElement(A.a,{store:Object(se.c)(ce,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},r.a.createElement(ie,null))),document.getElementById("root"))}},[[38,2,1]]]);
//# sourceMappingURL=main.cf99b643.chunk.js.map